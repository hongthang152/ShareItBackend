steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/$PROJECT_ID/share-it:$SHORT_SHA',
    '--build-arg', 'AZURE_STORAGE_ACCESS_KEY=$_AZURE_STORAGE_ACCESS_KEY',
    '--build-arg', 'AZURE_STORAGE_ACCOUNT=$_AZURE_STORAGE_ACCOUNT',
    '--build-arg', 'CONTAINER_NAME=$_CONTAINER_NAME',
    '--build-arg', 'FRONTEND_URL=$_FRONTEND_URL',
    '--build-arg', 'MONGO_URL=$_MONGO_URL',
    '.']
  id: 'Building Docker image'
  
- name: 'gcr.io/cloud-builders/docker'
  args: ['push','gcr.io/$PROJECT_ID/share-it:$SHORT_SHA']
  id: 'Pushing Docker image'

# - name: 'gcr.io/cloud-builders/kubectl'
#   id: 'Deploying to Google Cloud Kubernetes'

# images: ['gcr.io/$PROJECT_ID/share-it']